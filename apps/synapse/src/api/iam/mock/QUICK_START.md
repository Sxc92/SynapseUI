# Mock 数据快速使用指南

## 快速启用

### 方法1：环境变量（推荐）

在项目根目录创建 `.env.development` 文件：

```bash
VITE_USE_MOCK=true
```

然后重启开发服务器。

### 方法2：临时启用（快速测试）

修改 `apps/synapse/src/api/iam/system.ts`、`menu.ts`、`resource.ts`、`role.ts` 中的条件判断：

```typescript
// 将这行：
const useMock = import.meta.env.DEV && (import.meta.env.VITE_USE_MOCK === 'true' || import.meta.env.VITE_USE_MOCK === '1');

// 改为：
const useMock = import.meta.env.DEV; // 开发环境直接使用 Mock
```

## 测试数据

### 测试角色ID

- `role-001`: 部分权限（系统1和系统2的部分菜单和资源）
- `role-002`: 全选系统1的所有权限
- `role-003`: 空权限（用于测试新角色分配）

### 测试步骤

1. **打开权限分配弹窗**
   - 在角色列表中选择一个角色
   - 点击"权限分配"按钮

2. **验证反显**
   - 使用 `role-001` 测试部分权限反显
   - 使用 `role-002` 测试全选权限反显
   - 使用 `role-003` 测试空权限

3. **测试三级联动**
   - 选择资源 → 检查菜单和系统是否自动选中
   - 选择菜单 → 检查系统是否自动选中
   - 选择系统 → 检查所有菜单和资源是否自动选中
   - 取消系统 → 检查所有菜单和资源是否自动取消

4. **测试保存**
   - 修改权限选择
   - 点击保存
   - 再次打开弹窗，验证权限是否已保存

## Mock 数据结构

### 系统（3个）
- sys-001: 系统管理
- sys-002: 用户管理
- sys-003: 订单管理

### 菜单（8个，支持两级）
- 系统1: 系统配置（含2个子菜单）、角色管理
- 系统2: 用户列表（含1个子菜单）、用户资料
- 系统3: 订单列表

### 资源（17个）
- 每个菜单下都有对应的资源（BUTTON 和 API 类型）

## 注意事项

1. Mock 数据只在开发环境生效
2. 生产环境会自动使用真实 API
3. Mock 数据的保存操作会更新内存，刷新页面后重置
4. 可以根据需要修改 `mock/permission.ts` 中的数据

